<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Case_Filled_Category</fullName>
    <active>true</active>
    <description>check if the case has Category T3 filled, if it is empty the case cannot be closed, unless it has SPAM as category T1</description>
    <errorConditionFormula>NOT($Setup.CEPSkipValidationRules__c.Case__c) &amp;&amp;
AND(
OR( ISBLANK(TEXT(CategoryT1__c)),	
	ISBLANK(TEXT(CategoryT2__c)),
	ISBLANK(TEXT(CategoryT3__c))),
	OR(
		AND(RecordType.DeveloperName = &apos;Case&apos; ,  ISPICKVAL(Status, &apos;Closed&apos;)),
		AND(RecordType.DeveloperName != &apos;Case&apos; ,  ISPICKVAL(Status, &apos;Completed&apos;))
	),
!ISPICKVAL(CategoryT1__c, &apos;Spam&apos;)
)</errorConditionFormula>
    <errorMessage>You have not provided all the mandatory information for this case categorization, please check and enter missing details</errorMessage>
</ValidationRule>
